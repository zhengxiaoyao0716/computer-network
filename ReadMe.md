# computer-network
## 计算机网络课程设计

***
### 久违的用一次Go语言吧
因为必须用底层，选择Python之类好像不太合算。

Go语言确实开拓了我的思想，但不知不觉中很久没用了，看来实际开发还是用Python和Js多一些

2017-05-03: Shit, 做聊天室的组太多了，换题目

***
## 技术文档
> 懒得写实验报告，交给其他人去做了，这里把技术方面的内容写一写方便他写实验报告，只是草稿，排版可能比较随意。

### 实验一：TCP

环境说明：

- 开发环境：VSCode（微软的一款开源跨平台IDE）
- 编程语言：Go（Google的一款开源语言）
- 运行环境：跨平台，Win64、Win32、Linux都可以（借助了Go语言的跨平台优势）
- 部署设备：无论本机部署、局域网之间还是正式服务器到用户PC，只要能ping通就行

基于IP层开发，按照tcp协议自己分装与解析报头。

项目主要分两个模块：
- client: 客户端模块，包装并发出tcp报文
- server: 服务端模块，接受并解析tcp报文

和一个补充模块：
- syscall: 系统调用模块，基于更底层的系统调用做的。但由于是直接调用系统层，准确的说是Windows环境的WinSockApi(WSA)，所以并不能跨平台，代码也相对跟繁琐。

另外，build.bat是一个面向Win32(386)的构建脚本，可以在win64上编译出兼容win32的可执行二进制包。

### 实验二：多线程Web服务器

环境说明：同实验一

基于TCP层开发，按照HTTP协议自己分装报文。

项目分3个模块：
- server.go 负责监听端口、接收和解析请求报文、包装和返回响应报文等。
- handle.go 控制器模块，负责针对不同的请求资源做出响应，内建了一个静态资源的控制器，同时提供了接口方法，支持扩展动态路由控制器。
- webserver.main包下的webserver.go 程序入口，提供了host、port参数的命令行配置和本机可用IP扫描

同实验一，build.bat是面向Win32(386)的构建脚本。

一方面，对于每一个连接请求，我都开了一个Goroutine（Go在语言级别对并发的支持，类似但不同于线程或协程）来处理，避免了多请求的拥塞。

另一方面，在路由控制器的匹配方案上，我没有选择链式查找或正则匹配，而是将控制器注册到一个map里，Go的map结构是hashmap的一种实现，借助这种方式，保证了资源路由的常数级查找匹配效率。

加上Go本身的高效性和其优秀的并发模型，项目实际运行效果很好，速度也很快。
